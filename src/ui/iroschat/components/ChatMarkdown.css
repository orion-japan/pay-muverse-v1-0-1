/* =======================================
   Chat Markdown å…±é€šã‚¹ã‚¿ã‚¤ãƒ«
   ï¼ˆIros / Sofia å°‚ç”¨ï¼‰
   ======================================= */

/* â–¼ ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦‹å‡ºã—ï¼ˆğŸ§¿ / ğŸŒ€ / ğŸŒ± ãªã©ï¼‰ */
.sof-msgs .msgBody .iros-section-heading {
  font-weight: 600;
  font-size: 0.95rem;
  color: #5738ff; /* ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒè‰² / ã‚µã‚¤ãƒ‰ãƒ©ãƒ™ãƒ« */
  margin: 18px 0 10px;
  display: flex;
  align-items: center;
}

.sof-msgs .msgBody .iros-section-heading .emoji {
  margin-right: 6px;
}

/* â–¼ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ */
.sof-msgs .msgBody .iros-section-block {
  margin-bottom: 16px;
  padding-left: 10px;
  border-left: 3px solid #e2d7ff;
}

/* é€šå¸¸æœ¬æ–‡ */
.sof-msgs .msgBody .iros-section-block p {
  color: #2e2a45;
  line-height: 1.7;
  margin: 6px 0;
}

/* è£œè¶³ï¼ˆã‚«ãƒƒã‚³æ›¸ããªã©ï¼‰ã‚’è–„ã */
.sof-msgs .msgBody .iros-section-block p small,
.sof-msgs .msgBody .iros-section-block p em {
  color: #6b6b6b;
  font-style: normal;
}

/* =======================================
   å¼·èª¿ãƒ†ã‚­ã‚¹ãƒˆï¼šå…±é³´ã‚¹ã‚¿ã‚¤ãƒ«
   ======================================= */

/* ãƒ™ãƒ¼ã‚¹ï¼šåˆºã•ã‚‹è¡Œå‹•æ–¹å‘æ€§ã®è¨€è‘‰ */
.sof-msgs .msgBody .iros-emphasis {
  font-weight: 600;
}

/* ğŸŒŒ Visionï¼ˆé’ç´«ï¼‰ */
.sof-msgs .msgBody .iros-emphasis-vision {
  color: #4b2fff !important;
  background: none !important;
}

/* ğŸ”¥ é€šå¸¸ï¼ˆæ¿ƒãƒ”ãƒ³ã‚¯â†’æ¿ƒé’ã‚°ãƒ©ãƒ‡ï¼‰ */
.sof-msgs .msgBody .iros-emphasis-normal {
  /* æ¨™æº–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å…ˆã«æ›¸ã â†’ Lint å¯¾ç­– */
  background: linear-gradient(90deg, #c01880 0%, #002b99 100%);
  background-clip: text;
  color: transparent;

  /* WebKit ç³»ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ï¼ˆSafari / iOSï¼‰ */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå¤ã„ãƒ–ãƒ©ã‚¦ã‚¶ / ç‰¹æ®Šç’°å¢ƒç”¨ï¼‰ */
@supports not (-webkit-background-clip: text) {
  .sof-msgs .msgBody .iros-emphasis-normal {
    color: #c01880 !important;
  }
}

/* =======================================
   Vision ãƒ†ãƒ¼ãƒï¼ˆmsgBody å…¨ä½“ï¼‰
   ======================================= */

/* ğŸŒŒ Vision Mode å…¨ä½“ã®é›°å›²æ°— */
.sof-msgs .msgBody.vision-theme {
  position: relative;
  border-radius: 14px;
  padding: 10px 12px;
  margin: -2px -6px 0;
  background: radial-gradient(
      circle at 0% 0%,
      rgba(75, 47, 255, 0.12),
      transparent 55%
    ),
    radial-gradient(
      circle at 100% 100%,
      rgba(192, 132, 252, 0.16),
      transparent 55%
    );
  border: 1px solid rgba(75, 47, 255, 0.22);
}

/* Vision + Tå±¤ Hint ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã¨ãã®ã€ã™ã“ã—ã ã‘å…‰ã®ç²’æ„Ÿ */
.sof-msgs .msgBody.vision-hint-theme {
  box-shadow: 0 0 24px rgba(75, 47, 255, 0.25);
}

/* Vision ã§ãªã„é€šå¸¸ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯ã€ãƒœãƒ¼ãƒ€ãƒ¼ã‚„èƒŒæ™¯ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦ãŠãä¿é™º */
.sof-msgs .msgBody:not(.vision-theme) {
  border-radius: 0;
  border: none;
  background: transparent;
  box-shadow: none;
}

/* =======================================
   Headings / icons responsibility
   - Icons are rendered ONLY by React (ChatMarkdown.tsx)
   - CSS must NOT inject icons via ::before
   ======================================= */

/* --- HeadingLine (React) --- */
.sof-msgs .msgBody .iros-heading-line {
  display: flex;
  align-items: center;
  gap: 0.2em;
  font-weight: 700;
  font-size: 1.05rem;
  letter-spacing: 0.02em;
  margin: 1.15em 0 0.45em;
  line-height: 1.35;
}

/* âœ… è¦‹å‡ºã—ã®å³ã«è–„ã„ç·šï¼ˆå‘¼å¸ï¼‰ */
.sof-msgs .msgBody .iros-heading-line::after {
  content: '';
  flex: 1;
  height: 1px;
  margin-left: 0.7em;
  opacity: 0.16;
  background: currentColor;
}

/* âœ… ã€ŒäºŒã¤ã®è¦‹æ–¹ã€ãªã©ã‚µãƒ–è¦‹å‡ºã—æ‰±ã„ï¼ˆReactå´ã§ iros-heading-sub ã‚’ä»˜ã‘ã‚‹ï¼‰ */
.sof-msgs .msgBody .iros-heading-line.iros-heading-sub {
  font-size: 0.96rem;
  font-weight: 650;
  margin-top: 0.75em;
  margin-bottom: 0.35em;
  opacity: 0.92;
}

/* --- Keep regular markdown heading layout minimal (avoid double margins) --- */
.sof-msgs .msgBody h1,
.sof-msgs .msgBody h2,
.sof-msgs .msgBody h3,
.sof-msgs .msgBody h4 {
  margin: 0.2em 0; /* â† HeadingLine ã® margin ã«ä¸€æœ¬åŒ–ã™ã‚‹ãŸã‚æŠ‘ãˆã‚‹ */
  font-weight: 700;
  letter-spacing: 0.02em;
}

/* --- Legacy section heading class (if used elsewhere): style only, NO icon --- */
.sof-msgs .msgBody .iros-section-heading,
.msgBody .iros-section-heading {
  display: block;
  margin: 1.2em 0 0.4em;
  font-size: 1.05rem;
  font-weight: 700;
  letter-spacing: 0.02em;
}

/* Optional: if you render an explicit icon span in markup */
.sof-msgs .msgBody .iros-section-heading-icon,
.msgBody .iros-section-heading-icon {
  display: inline-block;
  margin-right: 6px;
}

/* =========================================================
   HARD STOP: kill ALL pseudo-icon injection (duplicated legacy)
   ========================================================= */
.sof-msgs .msgBody h1::before,
.sof-msgs .msgBody h2::before,
.sof-msgs .msgBody h3::before,
.sof-msgs .msgBody h4::before,
.sof-msgs .msgBody strong::before,
.sof-msgs .msgBody.vision-theme h1::before,
.sof-msgs .msgBody.vision-theme h2::before,
.sof-msgs .msgBody.vision-theme h3::before,
.sof-msgs .msgBody.vision-theme h4::before,
.sof-msgs .msgBody.vision-theme strong::before,
.msgBody .iros-section-heading::before,
.msgBody.vision-theme .iros-section-heading::before,
.iros-section-heading::before,
.irox-section-heading::before {
  content: none !important;
  display: none !important;
}

/* =========================================================
   FIX: ordered list numbering (keep as-is)
   ========================================================= */
.sof-msgs .msgBody ol {
  list-style: decimal !important;
  list-style-position: outside;
  padding-left: 1.25em;
  margin: 0.25em 0 0.6em;
}

.sof-msgs .msgBody ol > li::before {
  content: none !important;
}

.sof-msgs .msgBody ol > li {
  padding-left: 0 !important;
}

/* =========================
   iros typography (unified)
   ========================= */

/* æ®µè½ï¼šè¡Œé–“ã¨ä½™ç™½ã‚’ã“ã“ã§ä¸€æœ¬åŒ– */
.sof-msgs .msgBody .iros-p {
  margin: 0 0 0.9em;
  line-height: 1.95;
  white-space: pre-wrap;
}

/* æ®µè½ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ3æ®µä»¥ä¸Šæ™‚ã ã‘ä»˜ãã‚„ã¤ï¼‰ */
.sof-msgs .msgBody .iros-picon {
  display: inline-block;
  margin-right: 0.45em;
  font-size: 1.05rem;
  vertical-align: baseline;
  opacity: 0.9;
}

/* ç½«ç·šï¼ˆ--- ã‚„ ***ï¼‰ã®è¦‹ãŸç›® */
.sof-msgs .msgBody hr {
  border: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.12);
  margin: 1.05em 0;
}

/* â€œæ /åŒºåˆ‡ã‚Šâ€ ã‚’å…¥ã‚ŒãŸã„å ´åˆï¼šMarkdownã®å¼•ç”¨ï¼ˆ> ï¼‰ã‚’ç®±ã¨ã—ã¦ä½¿ã† */
.sof-msgs .msgBody blockquote {
  margin: 0.9em 0;
  padding: 0.75em 0.9em;
  border-left: 3px solid rgba(87, 56, 255, 0.28);
  background: rgba(87, 56, 255, 0.06);
  border-radius: 10px;
}

.sof-msgs .msgBody blockquote p {
  margin: 0.45em 0;
}

/* =========================
   iros typography (fallback: .msgBody direct)
   ========================= */

.msgBody .iros-p {
  margin: 0 0 0.9em;
  line-height: 1.95;
  white-space: pre-wrap;
}

.msgBody .iros-picon {
  display: inline-block;
  margin-right: 0.45em;
  font-size: 1.05rem;
  vertical-align: baseline;
  opacity: 0.9;
}

.msgBody .iros-heading-line {
  display: flex;
  align-items: center;
  gap: 0.2em;
  font-weight: 700;
  font-size: 1.05rem;
  letter-spacing: 0.02em;
  margin: 1.15em 0 0.45em;
  line-height: 1.35;
}

.msgBody .iros-heading-line::after {
  content: '';
  flex: 1;
  height: 1px;
  margin-left: 0.7em;
  opacity: 0.16;
  background: currentColor;
}

.msgBody .iros-heading-line.iros-heading-sub {
  font-size: 0.96rem;
  font-weight: 650;
  margin-top: 0.75em;
  margin-bottom: 0.35em;
  opacity: 0.92;
}

/* h1-h4 ã®ä½™ç™½ã¯æŠ‘ãˆã‚‹ï¼ˆHeadingLineå„ªå…ˆï¼‰ */
.msgBody h1,
.msgBody h2,
.msgBody h3,
.msgBody h4 {
  margin: 0.2em 0;
}

.msgBody hr {
  border: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.12);
  margin: 1.05em 0;
}

.msgBody blockquote {
  margin: 0.9em 0;
  padding: 0.75em 0.9em;
  border-left: 3px solid rgba(87, 56, 255, 0.28);
  background: rgba(87, 56, 255, 0.06);
  border-radius: 10px;
}

.msgBody blockquote p {
  margin: 0.45em 0;
}

/* å¤ªå­—ãŒã€Œè¦‹ãŸç›®ã§å¼±ã„ã€å ´åˆã®ä¿é™º */
.msgBody strong {
  font-weight: 700;
}

/* =========================
   æ®µè½ã®å‘¼å¸ã‚’å¼·ã‚ã‚‹
   ========================= */

   .sof-msgs .msgBody p,
   .msgBody p {
     margin: 0 0 1.2em;   /* â† ã“ã“ãŒæ®µè½é–“ä½™ç™½ */
     line-height: 2.05;   /* â† å°‘ã—ã ã‘åºƒã’ã‚‹ */
   }

   /* =========================
      è¦‹å‡ºã—ã®ä¸Šä¸‹ã®å‘¼å¸
      ========================= */

   .sof-msgs .msgBody .iros-heading-line,
   .msgBody .iros-heading-line {
     margin-top: 1.6em;    /* ä¸Šã‚’åºƒã’ã‚‹ */
     margin-bottom: 0.6em; /* ä¸‹ã‚‚å°‘ã—åºƒã’ã‚‹ */
   }

   /* =========================
      ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“ã®ç©ºæ°—
      ========================= */

   .sof-msgs .msgBody .iros-p + .iros-heading-line {
     margin-top: 1.8em;
   }
   .bubble {
    padding: 18px 20px; /* ä»Šã‚ˆã‚Šå°‘ã—åºƒã */
  }
/* Markdownæœ¬æ–‡ã®åŸºæœ¬ */
.sof-msgs .msgBody,
.msgBody {
  letter-spacing: 0.02em;
}

/* æ®µè½ï¼šè¡Œé–“ã¨ä½™ç™½ */
.sof-msgs .msgBody .iros-p,
.msgBody .iros-p {
  margin: 0 0 1.2em;
  line-height: 2.05;
  white-space: pre-wrap;
}

/* è¦‹å‡ºã—ï¼ˆHeadingLineï¼‰ */
.sof-msgs .msgBody .iros-heading-line,
.msgBody .iros-heading-line {
  margin: 1.6em 0 0.6em;
  line-height: 1.35;
  font-weight: 700;
}

/* å¤ªå­—ã®â€œåˆºã•ã‚Šâ€ */
.sof-msgs .msgBody .iros-emphasis,
.msgBody .iros-emphasis {
  font-weight: 700;
}

/* ç½«ç·š / å¼•ç”¨ã‚‚ â€œå ´â€ ã‚’ä½œã‚‹ */
.sof-msgs .msgBody hr,
.msgBody hr {
  border: 0;
  border-top: 1px solid rgba(0,0,0,0.12);
  margin: 1.1em 0;
}

.sof-msgs .msgBody blockquote,
.msgBody blockquote {
  margin: 1.0em 0;
  padding: 0.8em 1.0em;
  border-left: 3px solid rgba(87, 56, 255, 0.28);
  background: rgba(87, 56, 255, 0.06);
  border-radius: 10px;
}

/* =========================================================
   FORCE: paragraph spacing for ChatMarkdown
   - defeats msgBody inline line-height + IrosChat.css rules
   ========================================================= */
   .sof-msgs .msgBody p.iros-p,
   .msgBody p.iros-p {
     line-height: 2.05 !important;
     margin: 0 0 1.2em !important;
   }

   /* æ®µè½ãŒé€£ç¶šã™ã‚‹å ´åˆã¯å°‘ã—ã ã‘è©°ã‚ãŸã„ãªã‚‰ï¼ˆä»»æ„ï¼‰
   .sof-msgs .msgBody p.iros-p + p.iros-p,
   .msgBody p.iros-p + p.iros-p {
     margin-top: 0 !important;
   }
   */


/* æ”¹è¡Œï¼ˆ<br>ï¼‰ã«ã‚‚ä½™ç™½ã‚’ä¸ãˆã‚‹ï¼š1æ”¹è¡Œã§ã‚‚è¦‹ãŸç›®ãŒé–‹ã */
.sof-msgs .msgBody .iros-p br,
.msgBody .iros-p br {
  display: block;
  content: "";
  margin-top: 0.65em;
}
/* =========================================
   ãƒ–ãƒ­ãƒƒã‚¯å˜ä½ã®ä½™ç™½ï¼ˆè¦‹å‡ºã—ï¼‹æœ¬æ–‡ï¼‰
   ========================================= */
.sof-msgs .msgBody[style]{
  line-height: 2.3 !important;
}
/* --- Sofia breathing paragraphs --- */
.sof-msgs .msgBody {
  line-height: 2.05;            /* è¡Œã®å‘¼å¸ï¼ˆå¥½ã¿ã§ 1.9ã€œ2.2ï¼‰ */
  letter-spacing: 0.02em;
}

/* æ®µè½ã®ä½™ç™½ï¼å‘¼å¸ */
.sof-msgs .msgBody p,
.sof-msgs .msgBody .iros-p {
  margin: 0;                    /* ã¾ãšãƒªã‚»ãƒƒãƒˆ */
  margin-block: 0 1.15em;       /* ä¸‹ã ã‘ä½™ç™½ï¼ˆå¥½ã¿ã§ 0.9ã€œ1.4emï¼‰ */
}

/* æœ€å¾Œã®æ®µè½ã ã‘ä½™ç™½ãŒæ®‹ã‚‹ã®ãŒå«Œãªã‚‰æ¶ˆã™ */
.sof-msgs .msgBody p:last-child,
.sof-msgs .msgBody .iros-p:last-child {
  margin-bottom: 0;
}
