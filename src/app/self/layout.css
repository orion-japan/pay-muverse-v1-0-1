/* ================================
   /self 内側の整え（構造はそのまま）
   ================================ */

/* フレームを常に中央・固定幅 */
.self-shell {
  display: flex;
  justify-content: center;
  overflow-x: hidden;
}
.self-frame {
  width: min(100%, 430px);
  max-width: 430px;
  margin: 0;
  padding: 0 12px 72px;
  box-sizing: border-box;
}

/* 見出しまわりの余白を安定 */
.self-frame h1 {
  margin: 12px 4px 10px;
}
.self-frame h2 {
  margin: 8px 4px 10px;
}

/* 一覧カードの幅・余白 */
.self-frame .digest-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.self-frame .digest-row {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  background: #fff;
  border: 1px solid var(--mu-border, #e5e7eb);
  border-radius: var(--mu-radius-lg, 10px);
  box-shadow: var(--shadow, 0 1px 2px rgba(0,0,0,.04));
  padding: 10px 12px;
}

/* アバターがある左・本文右の2カラムを維持（既存構造のまま） */
.self-frame .digest-row.compact {
  display: grid;
  grid-template-columns: 44px 1fr; /* 左アバター / 右コンテンツ */
  gap: 8px;
  align-items: start;
}

/* アバターは安全に収める */
.self-frame .digest-row .avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
}

/* ===== 「一段下に本文（snippet）」を出す =====
   .oneline の中を1行目=メタ、2行目=本文 に切るだけ
   JSXは触らずCSSだけで配置します */
.self-frame .digest-row .oneline {
  display: grid;
  grid-template-columns: 1fr auto;  /* 左: 著者/本文 / 右: 日時等 */
  grid-auto-rows: min-content;
  row-gap: 4px;
  column-gap: 8px;
  align-items: center;
}

/* 1行目：著者（左）・日付など（右） */
.self-frame .digest-row .oneline .author {
  grid-row: 1;
  grid-column: 1;
  white-space: nowrap;
}
.self-frame .digest-row .oneline .meta,
.self-frame .digest-row .oneline .pill {
  grid-row: 1;
  grid-column: 2;
  justify-self: end;
}

/* 2行目：本文を全幅で一段下に */
.self-frame .digest-row .oneline .snippet {
  grid-row: 2;
  grid-column: 1 / -1;   /* 2列ぶち抜き */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3; /* ← 行数はお好みで 2→3 など */
  overflow: hidden;
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* ドット(・)は非表示でもOK（好み） */
.self-frame .digest-row .oneline .dot { display: none; }

/* リアクションの行は中央寄せ */
.self-frame .digest-row .reaction-row,
.self-frame .actions-row {
  display: flex;
  justify-content: center;
  margin-top: 6px;
}

/* 画像・長いURLがはみ出さないよう保険 */
.self-frame, .self-frame * {
  box-sizing: border-box;
  max-width: 100%;
}
.self-frame :where(img, video, canvas, svg) {
  max-width: 100%;
  height: auto;
  display: block;
}
.self-frame :where(p, div, span, li) {
  overflow-wrap: anywhere;
  word-break: break-word;
}
