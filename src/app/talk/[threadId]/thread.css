:root { --tabbar-h: 56px; }

/* 画面全体 */
.ftalk-wrap {
  max-width: 960px;
  margin: 0 auto;
  /* 入力欄(40) + 余白(10) + タブバー高さ + iOSセーフエリア */
  padding-bottom: calc(110px + var(--tabbar-h) + env(safe-area-inset-bottom));
}

/* ヘッダ */
.ftalk-head {
  position: sticky; top: 0; z-index: 10;
  display: grid; grid-template-columns: auto 1fr auto; gap: 8px;
  align-items: center; background: #fff; padding: 10px 8px; border-bottom: 1px solid #eee;
}
.back { border:1px solid #e6e6e6; background:#fafafa; border-radius:10px; padding:6px 10px; }
.title { display:flex; align-items:center; gap:8px; font-weight:600; }
.mini { width:26px; height:26px; border-radius:50%; object-fit:cover; }
.qr { border:1px solid #e6e6e6; background:#fafafa; border-radius:10px; padding:6px 10px; }

/* タイムライン */
.ftalk-main { padding: 10px 8px; }
.timeline { display: grid; gap: 10px; }
.row { display: grid; grid-template-columns: auto 1fr; gap: 8px; align-items: end; }
.row.me { grid-template-columns: 1fr auto; }
.row.me .bubble { justify-self: end; background:#eafbf0; border-color:#cfeede; }
.row.you .bubble { background:#f5f5ff; border-color:#e0e0ff; }
.avatar { width:34px; height:34px; border-radius:50%; object-fit:cover; background:#f3f4f6; }
.bubble { max-width: 68ch; padding: 8px 12px; border-radius: 14px; border:1px solid #eee; background:#fff; white-space:pre-wrap; word-break: break-word; }
.who { font-size: 12px; color:#666; margin-bottom:2px; }
.meta { font-size: 11px; color:#999; margin-top: 4px; text-align: right; }
.empty { color:#777; text-align:center; padding: 24px 8px; }

/* 入力欄（タブバーの上に固定 & 最前面）*/
.ftalk-input {
  position: fixed; left: 0; right: 0;
  bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom));
  z-index: 1000;
  background:#fff; border-top:1px solid #eee;
  display:grid; grid-template-columns: 1fr auto; gap:8px;
  padding:10px; max-width:960px; margin:0 auto;
}
.ftalk-input textarea {
  resize:none; min-height:40px; max-height:160px;
  padding:10px 12px; border:1px solid #e4e4e4; border-radius:10px;
  font: 14px/1.4 system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
  overflow:hidden;
}
.ftalk-input .send-btn {
  height:40px; padding:0 16px; border:none; border-radius:10px; background:#6b6fdd; color:#fff; font-weight:600; cursor:pointer;
}
.ftalk-input .send-btn:disabled { opacity:.5; cursor:not-allowed; }

/* QRモーダル */
.qr-modal { position: fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index: 1100; }
.qr-card { background:#fff; border-radius:12px; padding:16px; width: 300px; display:grid; justify-items:center; gap: 10px; }
.qr-caption { font-size: 12px; color:#666; text-align:center; word-break:break-all; }


