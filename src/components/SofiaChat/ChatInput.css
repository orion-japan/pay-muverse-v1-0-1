/* ===== Compose bar（フッター直上 / 常時表示） ===== */
.sof-compose{
  position: sticky;
  bottom: 0;
  z-index: 50;
  background: #fff;
  border-top: 1px solid #e6e7eb;
  padding: 10px 12px;
}

/* テキストエリア + アクション列 */
.sof-inputWrap{
  display: flex;
  align-items: flex-end;
  gap: 10px;
  max-width: 100%;
}

/* テキストエリア（最小4行・自動リサイズ想定） */
.sof-textarea{
  flex: 1 1 auto;
  width: 100%;
  min-height: 4.8em;       /* 4行相当 */
  max-height: 40vh;
  resize: none;
  line-height: 1.5;
  font-size: 14px;
  padding: 10px 12px;
  border: 1px solid #d9dbe1;
  border-radius: 12px;
  outline: none;
  background: #fff;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.03);
}
.sof-textarea:focus{
  border-color: #9bb7ff;
  box-shadow: 0 0 0 3px rgba(47,128,237,0.12);
}


/* ===== アクション領域（縦並び・右寄せ） ===== */
.sof-actions{
  display: flex;
  flex-direction: column;   /* 上：ir診断 / 下：送信 */
  align-items: flex-end;    /* 右端に寄せる */
  gap: 8px;
}

/* 共通：角を取った四角ボタン */
.sof-actionBtn{
  width: 84px;
  height: 36px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 700;
  padding: 0 12px;
  line-height: 36px;
  text-align: center;
  user-select: none;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,0.12);
  transition: background .15s ease, border-color .15s ease, box-shadow .15s ease, transform .03s ease, filter .15s ease;
}

/* ---- ir診断（上） */
.sof-actionBtn--ir{
  background: #f3f4f6;
  color: #111827;
  border: 1px solid #d1d5db;
  margin-top: -8px;                /* もう少し上に */
}
.sof-actionBtn--ir:hover:not(:disabled){
  background: #e5e7eb;
  border-color: #c7cdd4;
  box-shadow: 0 2px 6px rgba(0,0,0,0.16);
}

/* ---- 送信（下・しっかり青） */
.sof-actionBtn--send{
  background: #2563eb !important;  /* 競合に勝つ */
  color: #fff !important;
  border: 1px solid #1d4ed8 !important;
}
.sof-actionBtn--send:hover:not(:disabled){
  background: #1d4ed8 !important;
  border-color: #1e40af !important;
  box-shadow: 0 3px 8px rgba(29,78,216,0.45);
  filter: brightness(1.02);
}
.sof-actionBtn--send:disabled{
  background: #93c5fd !important;
  border-color: #93c5fd !important;
  color: #fff !important;
  box-shadow: none;
  opacity: .85;
  cursor: not-allowed;
}

/* モバイルで潰れないように */
@media (max-width: 520px){
  .sof-actionBtn{ width: 78px; }
}

/* アプリ全体のフッター */
.app-footer {
  position: sticky;       /* 画面下に固定 */
  bottom: 0;
  z-index: 100;           /* チャット本文より上に置く */
  background: #fff;       /* 白板 */
  border-top: 1px solid #e5e7eb; /* 上に仕切り線（任意） */
}

/* 1) フッターの“下地”となる白板（DOM変更なしで敷く） */
#mu-footer-root::before {
  content: "";
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  /* Footer.tsx でセットしている --footer-h を利用。未設定時は 56px */
  height: calc(var(--footer-h, 56px) + 24px + env(safe-area-inset-bottom));
  background: #fff;                 /* ← 完全不透明の白 */
  box-shadow: 0 -1px 0 #e5e7eb;     /* 上端の境界線（任意） */
  z-index: 999;                     /* 本体(nav:1000)より一段下 */
  pointer-events: none;             /* クリックを透過 */
}

/* 2) nav 自体も“白い帯”に強制（inline style を上書き） */
#mu-footer-root [aria-label="primary"] {
  /* 位置とサイズをフル幅に */
  position: fixed !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  transform: none !important;
  width: 100% !important;
  max-width: none !important;

  /* 角丸・半透明・ぼかしをオフにして白帯へ */
  background: #fff !important;
  border-radius: 0 !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;

  /* 余白と影（お好みで調整可） */
  padding: 8px 12px max(8px, env(safe-area-inset-bottom)) !important;
  gap: 12px !important;
  box-shadow: 0 -1px 0 #e5e7eb !important; /* 上線のみ */
  z-index: 1000 !important;
}

/* （任意）アイコン行の内側スペースが詰まり過ぎる場合の微調整 */
#mu-footer-root [aria-label="primary"] > a {
  padding: 6px 4px !important;
}


/* 白板（バックプレート）はナビの“下”、送信エリアの“後ろ”に置く */
#mu-footer-root::before {
  z-index: 10;           /* ← 下げる（今 999 などになっていたら上書き） */
}

/* フッターのナビ本体はその上 */
#mu-footer-root [aria-label="primary"] {
  z-index: 1000 !important;
}

/* 送信エリア（compose）はさらに一番上に */
.sof-compose {
  z-index: 1100;         /* ← 送信ボタンが確実に最前面になる */
  position: sticky;      /* 既に指定済みでもOK（再指定可） */
  bottom: 0;
}

/* 念のため：白板はクリックを透過（押せない問題を防止） */
#mu-footer-root::before {
  pointer-events: none;
}

/* 例：余白を 24px → 12px に調整 */
#mu-footer-root::before {
  height: calc(var(--footer-h, 56px) + 12px + env(safe-area-inset-bottom));
}
